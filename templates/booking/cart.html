{% extends 'base.html' %}
{% load static %}

{% block title %}–ö–æ—Ä–∑–∏–Ω–∞ - FoodSave{% endblock %}

{% block extra_css %}
<style>
/* ===== FRIENDLY SMART CART DESIGN SYSTEM ===== */
:root {
    /* –û—Å–Ω–æ–≤–Ω–∞—è –ø–∞–ª–∏—Ç—Ä–∞ FoodSave - —ç–∫–æ–ª–æ–≥–∏—á–Ω–∞—è –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω–∞—è */
    --primary: #059669;            /* –ó–µ–ª–µ–Ω—ã–π - –ø—Ä–∏—Ä–æ–¥–∞ –∏ —ç–∫–æ–ª–æ–≥–∏—è */
    --primary-light: #10b981;      /* –°–≤–µ—Ç–ª—ã–π –∑–µ–ª–µ–Ω—ã–π */
    --primary-dark: #047857;       /* –¢–µ–º–Ω—ã–π –∑–µ–ª–µ–Ω—ã–π */
    
    /* –ê–∫—Ü–µ–Ω—Ç–Ω—ã–µ —Ü–≤–µ—Ç–∞ - —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ */
    --success: #16a34a;            /* –ò–∑—É–º—Ä—É–¥–Ω—ã–π - —É—Å–ø–µ—Ö –∏ —Å–ø–∞—Å–µ–Ω–∏–µ –ø—Ä–∏—Ä–æ–¥—ã */
    --success-light: #22c55e;      /* –°–≤–µ—Ç–ª—ã–π –∏–∑—É–º—Ä—É–¥–Ω—ã–π */
    --warning: #f59e0b;            /* –Ø–Ω—Ç–∞—Ä–Ω—ã–π - –≤–Ω–∏–º–∞–Ω–∏–µ –∫ —Å—Ä–æ–∫—É –≥–æ–¥–Ω–æ—Å—Ç–∏ */
    --danger: #dc2626;             /* –ö—Ä–∞—Å–Ω—ã–π - —Å—Ä–æ—á–Ω–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–¥–∞—Ç—å */
    --danger-light: #ef4444;       /* –°–≤–µ—Ç–ª—ã–π –∫—Ä–∞—Å–Ω—ã–π */
    
    /* –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ - —Å–ø–æ–∫–æ–π–Ω—ã–µ –∏ —á–∏—Ç–∞–µ–º—ã–µ */
    --gray-50: #f9fafb;            /* –ü–æ—á—Ç–∏ –±–µ–ª—ã–π —Ñ–æ–Ω */
    --gray-100: #f3f4f6;           /* –û—á–µ–Ω—å —Å–≤–µ—Ç–ª—ã–π —Å–µ—Ä—ã–π */
    --gray-200: #e5e7eb;           /* –°–≤–µ—Ç–ª—ã–π —Å–µ—Ä—ã–π */
    --gray-300: #d1d5db;           /* –°—Ä–µ–¥–Ω–µ-—Å–≤–µ—Ç–ª—ã–π —Å–µ—Ä—ã–π */
    --gray-400: #9ca3af;           /* –°—Ä–µ–¥–Ω–∏–π —Å–µ—Ä—ã–π */
    --gray-500: #6b7280;           /* –°—Ä–µ–¥–Ω–µ-—Ç–µ–º–Ω—ã–π —Å–µ—Ä—ã–π */
    --gray-600: #4b5563;           /* –¢–µ–º–Ω—ã–π —Å–µ—Ä—ã–π */
    --gray-700: #374151;           /* –û—á–µ–Ω—å —Ç–µ–º–Ω—ã–π —Å–µ—Ä—ã–π */
    --gray-800: #1f2937;           /* –ü–æ—á—Ç–∏ —á–µ—Ä–Ω—ã–π */
    
    /* –ê–∫—Ü–µ–Ω—Ç—ã - —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ */
    --accent-warm: #fbbf24;        /* –¢–µ–ø–ª—ã–π –∂–µ–ª—Ç—ã–π */
    --accent-cool: #60a5fa;        /* –ü—Ä–æ—Ö–ª–∞–¥–Ω—ã–π —Å–∏–Ω–∏–π */
    --accent-green: #84cc16;       /* –°–≤–µ–∂–∏–π –∑–µ–ª–µ–Ω—ã–π */
    
    /* –¢–µ–Ω–∏ - –º—è–≥–∫–∏–µ –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–µ */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
    
    /* –ê–Ω–∏–º–∞—Ü–∏–∏ - –ø–ª–∞–≤–Ω—ã–µ –∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ */
    --transition-fast: 0.15s ease-out;
    --transition-normal: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ===== –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò ===== */
body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);
    color: var(--gray-800);
    line-height: 1.6;
}

/* ===== SMART CART HERO 2.0 ===== */
.cart-hero {
    background: linear-gradient(135deg, #059669 0%, #047857 100%);
    color: white;
    padding: 3rem 0;
    margin-bottom: 2rem;
    border-radius: 0 0 2rem 2rem;
    box-shadow: var(--shadow-xl);
    position: relative;
    overflow: hidden;
}

.cart-hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
    pointer-events: none;
}

.cart-hero::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 20% 80%, rgba(251, 191, 36, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(239, 68, 68, 0.1) 0%, transparent 50%);
    pointer-events: none;
    animation: backgroundShift 8s ease-in-out infinite;
}

.cart-hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
        radial-gradient(circle at 10% 90%, rgba(16, 185, 129, 0.05) 0%, transparent 40%),
        radial-gradient(circle at 90% 10%, rgba(59, 130, 246, 0.05) 0%, transparent 40%);
    pointer-events: none;
    animation: backgroundShiftSecondary 12s ease-in-out infinite reverse;
}

.cart-hero::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 20% 80%, rgba(251, 191, 36, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(239, 68, 68, 0.1) 0%, transparent 50%);
    pointer-events: none;
    animation: backgroundShift 8s ease-in-out infinite;
}

.cart-hero::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 20% 80%, rgba(251, 191, 36, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(239, 68, 68, 0.1) 0%, transparent 50%);
    pointer-events: none;
    animation: backgroundShift 8s ease-in-out infinite;
}

@keyframes backgroundShiftSecondary {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 0.8; }
}

@keyframes backgroundShift {
    0%, 100% { opacity: 0.5; }
    50% { opacity: 1; }
}

/* –ì–ª–∞–≤–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
.hero-main {
    text-align: center;
    margin-bottom: 2rem;
    position: relative;
    z-index: 1;
    animation: fadeInUp 1s ease-out;
}

.hero-main::before {
    content: '';
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 2px;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    animation: heroLineGlow 2s ease-in-out infinite;
}

@keyframes heroLineGlow {
    0%, 100% { opacity: 0.3; width: 100px; }
    50% { opacity: 1; width: 150px; }
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.hero-title {
    font-size: 3rem;
    font-weight: 800;
    margin: 0 0 1rem 0;
    text-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    letter-spacing: -0.03em;
    color: #ffffff;
    position: relative;
}

.hero-title::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 3px;
    background: linear-gradient(90deg, #fbbf24, #ef4444);
    border-radius: 2px;
    animation: titleUnderline 2s ease-in-out infinite;
    box-shadow: 0 2px 8px rgba(251, 191, 36, 0.4);
}

.hero-title::before {
    content: '';
    position: absolute;
    top: 50%;
    left: -20px;
    width: 4px;
    height: 4px;
    background: #fbbf24;
    border-radius: 50%;
    transform: translateY(-50%) scale(0);
    animation: titleDot 2s ease-in-out infinite 0.5s;
    box-shadow: 0 0 8px rgba(251, 191, 36, 0.6);
}

.hero-title::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 3px;
    background: linear-gradient(90deg, #fbbf24, #ef4444);
    border-radius: 2px;
    animation: titleUnderline 2s ease-in-out infinite;
    box-shadow: 0 2px 8px rgba(251, 191, 36, 0.4);
}

.hero-title::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 3px;
    background: linear-gradient(90deg, #fbbf24, #ef4444);
    border-radius: 2px;
    animation: titleUnderline 2s ease-in-out infinite;
    box-shadow: 0 2px 8px rgba(251, 191, 36, 0.4);
}

@keyframes titleDot {
    0%, 100% { transform: translateY(-50%) scale(0); }
    50% { transform: translateY(-50%) scale(1); }
}

@keyframes titleUnderline {
    0%, 100% { width: 60px; opacity: 1; }
    50% { width: 100px; opacity: 0.7; }
}

.hero-subtitle {
    font-size: 1.25rem;
    margin: 0;
    opacity: 0.9;
    font-weight: 500;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    animation: subtitleGlow 3s ease-in-out infinite;
    position: relative;
}

.hero-subtitle::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(251, 191, 36, 0.5), transparent);
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.hero-subtitle:hover::after {
    transform: scaleX(1);
}

@keyframes subtitleGlow {
    0%, 100% { text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
    50% { text-shadow: 0 2px 8px rgba(251, 191, 36, 0.3); }
}

/* –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
.cart-stats-interactive {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
    margin-bottom: 2rem;
    position: relative;
    z-index: 1;
}

.stat-card {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 1.5rem;
    padding: 1.5rem;
    min-width: 140px;
    text-align: center;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    opacity: 0;
    transform: translateY(20px);
    position: relative;
    z-index: 1;
}

.stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, transparent 100%);
    border-radius: 1.5rem;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: -1;
}

.stat-card:hover::before {
    opacity: 1;
}

.stat-card:hover {
    transform: translateY(-8px) scale(1.05);
    background: rgba(255, 255, 255, 0.25);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    border-color: rgba(255, 255, 255, 0.4);
    z-index: 10;
}

.stat-card:hover .stat-icon {
    transform: scale(1.1) rotate(5deg);
    color: #fbbf24;
    filter: drop-shadow(0 4px 8px rgba(251, 191, 36, 0.3));
}

.stat-card:hover .stat-value {
    color: #fbbf24;
    text-shadow: 0 2px 8px rgba(251, 191, 36, 0.3);
    transform: scale(1.05);
}

.stat-card:hover .stat-label {
    color: #fbbf24;
    transform: translateY(-2px);
}

.stat-card:hover .stat-icon {
    transform: scale(1.1) rotate(5deg);
    color: #fbbf24;
}

.stat-card:hover .stat-value {
    color: #fbbf24;
    text-shadow: 0 2px 8px rgba(251, 191, 36, 0.3);
}

.stat-card.primary-stat {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0.15) 100%);
    border: 2px solid rgba(255, 255, 255, 0.4);
    transform: scale(1.05);
    position: relative;
    overflow: hidden;
}

.stat-card.primary-stat::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transform: rotate(45deg);
    animation: primaryStatShine 3s ease-in-out infinite;
}

.stat-card.primary-stat::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, transparent 0%, rgba(251, 191, 36, 0.1) 50%, transparent 100%);
    border-radius: 1.5rem;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: -1;
}

.stat-card.primary-stat .stat-icon {
    animation: primaryStatIconGlow 2s ease-in-out infinite;
}

@keyframes primaryStatIconGlow {
    0%, 100% { filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1)); }
    50% { filter: drop-shadow(0 4px 8px rgba(251, 191, 36, 0.4)); }
}

.stat-card.primary-stat .stat-icon {
    animation: primaryStatIconGlow 2s ease-in-out infinite;
}

@keyframes primaryStatIconGlow {
    0%, 100% { filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1)); }
    50% { filter: drop-shadow(0 4px 8px rgba(251, 191, 36, 0.4)); }
}

.stat-card.primary-stat .stat-value {
    animation: primaryStatValueGlow 2s ease-in-out infinite 0.5s;
}

@keyframes primaryStatValueGlow {
    0%, 100% { text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
    50% { text-shadow: 0 2px 8px rgba(251, 191, 36, 0.3); }
}

.stat-card.primary-stat:hover::after {
    opacity: 1;
}

@keyframes primaryStatShine {
    0% { transform: rotate(45deg) translateX(-100%); }
    100% { transform: rotate(45deg) translateX(100%); }
}

.stat-card.primary-stat:hover {
    transform: translateY(-8px) scale(1.1);
}

.stat-icon {
    font-size: 2rem;
    margin-bottom: 0.75rem;
    opacity: 0.9;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}

.stat-icon:hover {
    filter: drop-shadow(0 4px 8px rgba(251, 191, 36, 0.4));
}

.stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.25rem;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
}

.stat-value::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, rgba(251, 191, 36, 0.5), transparent);
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.stat-card:hover .stat-value::after {
    transform: scaleX(1);
}

.stat-label {
    font-size: 0.875rem;
    opacity: 0.8;
    font-weight: 500;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
}

.stat-label::before {
    content: '';
    position: absolute;
    top: 50%;
    left: -10px;
    width: 4px;
    height: 4px;
    background: rgba(251, 191, 36, 0.5);
    border-radius: 50%;
    transform: translateY(-50%) scale(0);
    transition: transform 0.3s ease;
}

.stat-card:hover .stat-label::before {
    transform: translateY(-50%) scale(1);
}

/* –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —ç–∫–æ–Ω–æ–º–∏–∏ */
.savings-progress-container {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 1.5rem;
    padding: 1.5rem;
    margin: 0 auto;
    max-width: 500px;
    position: relative;
    z-index: 1;
    animation: slideInUp 0.8s ease-out 0.5s both;
    overflow: hidden;
}

.savings-progress-container::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: conic-gradient(from 0deg, transparent, rgba(255, 255, 255, 0.05), transparent);
    animation: progressContainerRotate 10s linear infinite;
    z-index: -1;
}

@keyframes progressContainerRotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.progress-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.progress-text {
    font-weight: 500;
    font-size: 0.875rem;
    transition: all 0.3s ease;
}

.progress-text:hover {
    color: #fbbf24;
    transform: translateX(5px);
}

.progress-percentage {
    font-weight: 700;
    font-size: 1.125rem;
    color: #fbbf24;
    animation: percentagePulse 2s ease-in-out infinite;
    position: relative;
}

.progress-percentage::before {
    content: '';
    position: absolute;
    top: 50%;
    left: -15px;
    width: 8px;
    height: 8px;
    background: #fbbf24;
    border-radius: 50%;
    transform: translateY(-50%) scale(0);
    animation: percentageDot 2s ease-in-out infinite 0.5s;
    box-shadow: 0 0 8px rgba(251, 191, 36, 0.6);
}

.progress-percentage::after {
    content: '';
    position: absolute;
    top: 50%;
    right: -15px;
    width: 6px;
    height: 6px;
    background: #ef4444;
    border-radius: 50%;
    transform: translateY(-50%) scale(0);
    animation: percentageDotSecondary 2s ease-in-out infinite 1s;
    box-shadow: 0 0 6px rgba(239, 68, 68, 0.6);
}

.progress-percentage::after {
    content: '';
    position: absolute;
    top: 50%;
    right: -15px;
    width: 6px;
    height: 6px;
    background: #ef4444;
    border-radius: 50%;
    transform: translateY(-50%) scale(0);
    animation: percentageDotSecondary 2s ease-in-out infinite 1s;
    box-shadow: 0 0 6px rgba(239, 68, 68, 0.6);
}

@keyframes percentageDotSecondary {
    0%, 100% { transform: translateY(-50%) scale(0); }
    50% { transform: translateY(-50%) scale(1); }
}

.progress-percentage {
    font-weight: 700;
    font-size: 1.125rem;
    color: #fbbf24;
    animation: percentagePulse 2s ease-in-out infinite;
    position: relative;
}

@keyframes percentageDot {
    0%, 100% { transform: translateY(-50%) scale(0); }
    50% { transform: translateY(-50%) scale(1); }
}

@keyframes percentagePulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

.progress-bar-hero {
    width: 100%;
    height: 12px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 6px;
    overflow: hidden;
    margin-bottom: 0.75rem;
    position: relative;
}

.progress-bar-hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.1) 50%, transparent 100%);
    animation: progressBarGlow 2s ease-in-out infinite;
}

.progress-bar-hero::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent 0%, rgba(251, 191, 36, 0.05) 50%, transparent 100%);
    animation: progressBarGlowSecondary 3s ease-in-out infinite 1s;
}

.progress-bar-hero {
    width: 100%;
    height: 12px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 6px;
    overflow: hidden;
    margin-bottom: 0.75rem;
    position: relative;
}

.progress-bar-hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.1) 50%, transparent 100%);
    animation: progressBarGlow 2s ease-in-out infinite;
}

.progress-bar-hero {
    width: 100%;
    height: 12px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 6px;
    overflow: hidden;
    margin-bottom: 0.75rem;
    position: relative;
}

.progress-bar-hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.1) 50%, transparent 100%);
    animation: progressBarGlow 2s ease-in-out infinite;
}

@keyframes progressBarGlowSecondary {
    0%, 100% { opacity: 0.1; }
    50% { opacity: 0.3; }
}

@keyframes progressBarGlow {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 0.8; }
}

.progress-fill-hero {
    height: 100%;
    background: linear-gradient(90deg, #10b981 0%, #fbbf24 50%, #ef4444 100%);
    border-radius: 6px;
    transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    box-shadow: 0 0 10px rgba(16, 185, 129, 0.3);
    animation: progressFillGlow 2s ease-in-out infinite;
}

@keyframes progressFillGlow {
    0%, 100% { box-shadow: 0 0 10px rgba(16, 185, 129, 0.3); }
    50% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.6); }
}

.progress-fill-hero::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    animation: progressShine 2s ease-in-out infinite;
}

@keyframes progressShine {
    0% { left: -100%; }
    100% { left: 100%; }
}

.progress-target {
    text-align: center;
    font-size: 0.875rem;
    opacity: 0.8;
    transition: all 0.3s ease;
}

.progress-target:hover {
    opacity: 1;
    transform: scale(1.05);
}

.progress-target strong {
    color: #fbbf24;
    font-weight: 800;
    position: relative;
}

.progress-target strong::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, #fbbf24, #ef4444);
    border-radius: 1px;
    transform: scaleX(0);
    transition: transform 0.3s ease;
    box-shadow: 0 2px 4px rgba(251, 191, 36, 0.3);
}

.progress-target strong::before {
    content: '';
    position: absolute;
    top: -2px;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(251, 191, 36, 0.3), transparent);
    transform: scaleX(0);
    transition: transform 0.3s ease 0.1s;
}

.progress-target:hover strong::before {
    transform: scaleX(1);
}

.progress-target {
    text-align: center;
    font-size: 0.875rem;
    opacity: 0.8;
    transition: all 0.3s ease;
}

.progress-target:hover strong::after {
    transform: scaleX(1);
}

/* –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –±–µ–π–¥–∂–∏ */
.hero-badges {
    text-align: center;
    margin-top: 1.5rem;
    position: relative;
    z-index: 1;
    animation: fadeIn 1s ease-out 1s both;
}

.hero-badges::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 200px;
    height: 200px;
    background: radial-gradient(circle, rgba(251, 191, 36, 0.1) 0%, transparent 70%);
    border-radius: 50%;
    animation: badgeBackgroundPulse 4s ease-in-out infinite;
    z-index: -1;
}

@keyframes badgeBackgroundPulse {
    0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.3; }
    50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.6; }
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: scale(0.8);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.badge-emotion {
    font-size: 3rem;
    animation: emotionFloat 3s ease-in-out infinite;
    display: inline-block;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
}

.badge-emotion::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
    background: radial-gradient(circle, rgba(251, 191, 36, 0.2) 0%, transparent 70%);
    border-radius: 50%;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: -1;
}

.badge-emotion::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 150%;
    height: 150%;
    background: conic-gradient(from 0deg, transparent, rgba(251, 191, 36, 0.1), transparent);
    border-radius: 50%;
    animation: badgeRotate 4s linear infinite;
    z-index: -2;
}

.badge-emotion {
    font-size: 3rem;
    animation: emotionFloat 3s ease-in-out infinite;
    display: inline-block;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
}

.badge-emotion::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
    background: radial-gradient(circle, rgba(251, 191, 36, 0.2) 0%, transparent 70%);
    border-radius: 50%;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: -1;
}

@keyframes badgeRotate {
    from { transform: translate(-50%, -50%) rotate(0deg); }
    to { transform: translate(-50%, -50%) rotate(360deg); }
}

.badge-emotion:hover::before {
    opacity: 1;
}

.badge-emotion:hover {
    transform: scale(1.2) rotate(10deg);
    filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.3));
}

@keyframes emotionFloat {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-10px) rotate(5deg); }
}

/* ===== –£–ú–ù–ê–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø ===== */
.smart-navigation {
    background: white;
    padding: 1rem 1.5rem;
    border-radius: 1rem;
    margin-bottom: 2rem;
    box-shadow: var(--shadow-md);
    border: 1px solid var(--gray-100);
}

.breadcrumb-friendly {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: var(--gray-600);
}

.breadcrumb-friendly a {
    color: var(--primary);
    text-decoration: none;
    font-weight: 500;
    transition: var(--transition-fast);
}

.breadcrumb-friendly a:hover {
    color: var(--primary-dark);
}

.breadcrumb-friendly .separator {
    color: var(--gray-400);
}

/* ===== –ë–´–°–¢–†–´–ï –î–ï–ô–°–¢–í–ò–Ø ===== */
.quick-actions {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
    flex-wrap: wrap;
}

.quick-action-btn {
    background: white;
    border: 2px solid var(--gray-200);
    color: var(--gray-700);
    padding: 0.875rem 1.5rem;
    border-radius: 1rem;
    text-decoration: none;
    font-weight: 500;
    transition: var(--transition-normal);
    display: flex;
    align-items: center;
    gap: 0.5rem;
    box-shadow: var(--shadow-sm);
    position: relative;
    overflow: hidden;
}

.quick-action-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(79, 70, 229, 0.1), transparent);
    transition: var(--transition-normal);
}

.quick-action-btn:hover::before {
    left: 100%;
}

.quick-action-btn:hover {
    border-color: var(--primary);
    color: var(--primary);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    text-decoration: none;
}

.quick-action-btn.primary {
    background: linear-gradient(135deg, var(--success) 0%, var(--success-light) 100%);
    border-color: var(--success);
    color: white;
    box-shadow: var(--shadow-md);
}

.quick-action-btn.primary:hover {
    background: linear-gradient(135deg, var(--success-light) 0%, var(--success) 100%);
    border-color: var(--success-light);
    color: white;
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

/* ===== –°–û–°–¢–û–Ø–ù–ò–ï –ü–£–°–¢–û–ô –ö–û–†–ó–ò–ù–´ ===== */
.empty-cart-friendly {
    text-align: center;
    padding: 4rem 2rem;
    background: white;
    border-radius: 1.5rem;
    box-shadow: var(--shadow-md);
    border: 1px solid var(--gray-100);
    animation: fadeInUp 0.6s ease-out;
}

.empty-cart-icon {
    font-size: 4rem;
    margin-bottom: 1.5rem;
    animation: float 3s ease-in-out infinite;
}

.empty-cart-friendly h3 {
    color: var(--gray-700);
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
    font-weight: 600;
}

.empty-cart-friendly p {
    color: var(--gray-600);
    margin-bottom: 2rem;
    font-size: 1.125rem;
}

.empty-cart-actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
}

/* ===== –£–ú–ù–´–ï –ö–ê–†–¢–û–ß–ö–ò –¢–û–í–ê–†–û–í ===== */
.cart-item-friendly {
    background: white;
    border-radius: 1.25rem;
    padding: 1.5rem;
    margin-bottom: 1rem;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--gray-100);
    transition: var(--transition-normal);
    animation: slideInUp 0.4s ease-out;
    position: relative;
    overflow: hidden;
}

.cart-item-friendly::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(180deg, var(--primary) 0%, var(--primary-light) 100%);
    opacity: 0;
    transition: var(--transition-normal);
}

.cart-item-friendly:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-2px);
    border-color: var(--gray-200);
}

.cart-item-friendly:hover::before {
    opacity: 1;
}

.cart-item-content {
    display: flex;
    align-items: center;
    gap: 1.5rem;
}

.cart-item-image {
    width: 80px;
    height: 80px;
    border-radius: 1rem;
    object-fit: cover;
    box-shadow: var(--shadow-sm);
    transition: var(--transition-normal);
}

.cart-item-friendly:hover .cart-item-image {
    transform: scale(1.05);
}

.cart-item-details {
    flex: 1;
}

.cart-item-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--gray-800);
    margin-bottom: 0.25rem;
}

.cart-item-vendor {
    color: var(--gray-600);
    font-size: 0.875rem;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.cart-item-price {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--success);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.price-savings {
    font-size: 0.75rem;
    color: var(--success);
    background: var(--gray-50);
    padding: 0.25rem 0.5rem;
    border-radius: 0.5rem;
    font-weight: 500;
}

/* ===== –î–†–£–ñ–ï–õ–Æ–ë–ù–´–ï –ö–û–ù–¢–†–û–õ–´ –ö–û–õ–ò–ß–ï–°–¢–í–ê ===== */
.quantity-controls-friendly {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: var(--gray-50);
    border-radius: 1rem;
    padding: 0.25rem;
    border: 1px solid var(--gray-200);
}

.quantity-btn-friendly {
    width: 2.5rem;
    height: 2.5rem;
    border: none;
    background: white;
    border-radius: 0.75rem;
    color: var(--gray-700);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow-sm);
    position: relative;
    overflow: hidden;
}

.quantity-btn-friendly::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: var(--primary);
    border-radius: 50%;
    transition: var(--transition-fast);
    transform: translate(-50%, -50%);
}

.quantity-btn-friendly:hover::before {
    width: 100%;
    height: 100%;
}

.quantity-btn-friendly:hover {
    color: white;
    transform: scale(1.05);
}

.quantity-btn-friendly:active {
    transform: scale(0.95);
}

.quantity-input-friendly {
    width: 3.5rem;
    text-align: center;
    border: none;
    background: transparent;
    font-weight: 600;
    color: var(--gray-800);
    font-size: 1rem;
    border-radius: 0.5rem;
    padding: 0.5rem;
}

.quantity-input-friendly:focus {
    outline: none;
    background: white;
    box-shadow: var(--shadow-sm);
}

/* ===== –î–†–£–ñ–ï–õ–Æ–ë–ù–ê–Ø –ö–ù–û–ü–ö–ê –£–î–ê–õ–ï–ù–ò–Ø ===== */
.remove-btn-friendly {
    background: var(--gray-100);
    color: var(--gray-600);
    border: none;
    border-radius: 1rem;
    padding: 0.75rem;
    cursor: pointer;
    transition: var(--transition-fast);
    box-shadow: var(--shadow-sm);
    position: relative;
    overflow: hidden;
}

.remove-btn-friendly::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(239, 68, 68, 0.1), transparent);
    transition: var(--transition-normal);
}

.remove-btn-friendly:hover::before {
    left: 100%;
}

.remove-btn-friendly:hover {
    background: var(--danger-light);
    color: white;
    transform: scale(1.05);
    box-shadow: var(--shadow-md);
}

.remove-btn-friendly:active {
    transform: scale(0.95);
}

/* ===== –£–ú–ù–ê–Ø –°–í–û–î–ö–ê –ó–ê–ö–ê–ó–ê ===== */
.smart-summary {
    background: white;
    border-radius: 1.5rem;
    padding: 2rem;
    box-shadow: var(--shadow-lg);
    border: 1px solid var(--gray-100);
    position: sticky;
    top: 2rem;
    animation: slideInRight 0.4s ease-out;
}

.summary-mood {
    text-align: center;
    margin-bottom: 1.5rem;
    padding: 1rem;
    background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);
    border-radius: 1rem;
    border: 1px solid var(--gray-200);
}

.mood-icon {
    font-size: 2rem;
    margin-bottom: 0.5rem;
    display: block;
}

.mood-text {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--gray-700);
}

.summary-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 0;
    border-bottom: 1px solid var(--gray-100);
}

.summary-row:last-child {
    border-bottom: none;
    font-weight: 700;
    font-size: 1.25rem;
    color: var(--gray-800);
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 2px solid var(--gray-200);
}

.summary-label {
    color: var(--gray-600);
    font-weight: 500;
}

.summary-value {
    font-weight: 600;
    color: var(--gray-800);
}

.summary-total {
    color: var(--success) !important;
    font-size: 1.5rem !important;
}

.summary-savings {
    color: var(--success);
    font-size: 0.875rem;
    font-weight: 500;
    background: var(--gray-50);
    padding: 0.25rem 0.5rem;
    border-radius: 0.5rem;
    margin-left: 0.5rem;
}

/* ===== –î–†–£–ñ–ï–õ–Æ–ë–ù–´–ï –ö–ù–û–ü–ö–ò ===== */
.checkout-btn-friendly {
    width: 100%;
    background: linear-gradient(135deg, var(--success) 0%, var(--success-light) 100%);
    color: white;
    border: none;
    border-radius: 1rem;
    padding: 1rem 2rem;
    font-size: 1.125rem;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-normal);
    box-shadow: var(--shadow-md);
    margin-top: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    position: relative;
    overflow: hidden;
}

.checkout-btn-friendly::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: var(--transition-normal);
}

.checkout-btn-friendly:hover::before {
    left: 100%;
}

.checkout-btn-friendly:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-xl);
    background: linear-gradient(135deg, var(--success-light) 0%, var(--success) 100%);
}

.checkout-btn-friendly:active {
    transform: translateY(0);
}

.continue-shopping-btn-friendly {
    width: 100%;
    background: white;
    color: var(--primary);
    border: 2px solid var(--primary);
    border-radius: 1rem;
    padding: 1rem 2rem;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-normal);
    margin-top: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    text-decoration: none;
    position: relative;
    overflow: hidden;
}

.continue-shopping-btn-friendly::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(79, 70, 229, 0.1), transparent);
    transition: var(--transition-normal);
}

.continue-shopping-btn-friendly:hover::before {
    left: 100%;
}

.continue-shopping-btn-friendly:hover {
    background: var(--primary);
    color: white;
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    text-decoration: none;
}

/* ===== –£–ú–ù–´–ï –ü–û–î–°–ö–ê–ó–ö–ò ===== */
.smart-tips {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    padding: 1rem 1.5rem;
    border-radius: 1rem;
    margin-bottom: 2rem;
    box-shadow: var(--shadow-md);
    position: relative;
    overflow: hidden;
}

.smart-tips::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
    pointer-events: none;
}

.smart-tips-content {
    position: relative;
    z-index: 1;
    display: flex;
    align-items: center;
    gap: 1rem;
}

.smart-tips-icon {
    font-size: 1.5rem;
    flex-shrink: 0;
}

.smart-tips-text {
    font-weight: 500;
    font-size: 0.875rem;
}

/* ===== –ó–ê–ì–†–£–ó–ö–ê ===== */
.skeleton-friendly {
    background: linear-gradient(90deg, var(--gray-200) 25%, var(--gray-100) 50%, var(--gray-200) 75%);
    background-size: 200% 100%;
    animation: loading 1.5s infinite;
    border-radius: 0.5rem;
}

.skeleton-item-friendly {
    height: 120px;
    margin-bottom: 1rem;
}

/* ===== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ===== */
.notification-friendly {
    position: fixed;
    top: 2rem;
    right: 2rem;
    background: white;
    border-radius: 1rem;
    padding: 1rem 1.5rem;
    box-shadow: var(--shadow-xl);
    border-left: 4px solid var(--success);
    z-index: 1000;
    animation: slideInRight 0.3s ease-out;
    max-width: 300px;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.notification-friendly.success {
    border-left-color: var(--success);
}

.notification-friendly.error {
    border-left-color: var(--danger);
}

.notification-friendly.info {
    border-left-color: var(--primary);
}

.notification-icon {
    font-size: 1.25rem;
    flex-shrink: 0;
}

.notification-text {
    font-weight: 500;
    color: var(--gray-800);
}

/* ===== –ê–ù–ò–ú–ê–¶–ò–ò ===== */
@keyframes loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(30px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

/* ===== –ö–ê–¢–ê–õ–û–ì –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–• –¢–û–í–ê–†–û–í ===== */
.recommendations-section {
    margin-top: 3rem;
    padding: 2rem 0;
    background: var(--gray-50);
    border-radius: 1.5rem;
}

.recommendations-header {
    text-align: center;
    margin-bottom: 2rem;
}

.recommendations-header h3 {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--gray-800);
    margin-bottom: 0.5rem;
}

.recommendations-header p {
    color: var(--gray-600);
    font-size: 1rem;
}

.recommendations-carousel-container {
    width: 100%;
    overflow: hidden;
    position: relative;
    display: flex;
    align-items: center;
    padding: 0 2rem;
}

/* –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –∫–∞—Ä—É—Å–µ–ª–∏ */
.carousel-nav-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 40px;
    height: 40px;
    border: none;
    border-radius: 50%;
    background: white;
    color: var(--primary);
    font-size: 1.125rem;
    cursor: pointer;
    box-shadow: var(--shadow-lg);
    transition: var(--transition-normal);
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid var(--gray-100);
}

.carousel-nav-btn:hover {
    background: var(--primary);
    color: white;
    transform: translateY(-50%) scale(1.1);
    border-color: var(--primary);
    box-shadow: var(--shadow-xl);
}

.carousel-nav-btn:active {
    transform: translateY(-50%) scale(0.95);
}

.carousel-prev {
    left: 0;
}

.carousel-next {
    right: 0;
}

.recommendations-carousel {
    display: flex;
    gap: 1rem;
    overflow-x: auto;
    padding: 1rem 0;
    scroll-snap-type: x mandatory;
    scrollbar-width: none;
    -ms-overflow-style: none;
    align-items: stretch;
    justify-content: flex-start;
    min-height: 420px;
    max-width: 1200px;
    margin: 0 auto;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    will-change: scroll-position;
    transform: translateZ(0);
}

.recommendations-carousel::-webkit-scrollbar {
    display: none;
}

.recommendation-item {
    flex: 0 0 280px;
    background: white;
    border-radius: 1rem;
    padding: 1rem;
    box-shadow: var(--shadow-md);
    border: 1px solid var(--gray-100);
    transition: var(--transition-normal);
    scroll-snap-align: center;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    height: 400px;
    margin: 0 0.5rem;
}

.recommendation-item:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
}

.recommendation-badges {
    position: absolute;
    top: 0.75rem;
    left: 0.75rem;
    display: flex;
    gap: 0.5rem;
    z-index: 2;
}

.badge-hot, .badge-discount {
    font-size: 0.75rem;
    font-weight: 600;
    padding: 0.25rem 0.5rem;
    border-radius: 0.5rem;
    color: white;
}

.badge-hot {
    background: linear-gradient(135deg, #ef4444, #dc2626);
}

.badge-discount {
    background: linear-gradient(135deg, #10b981, #059669);
}

.recommendation-image {
    width: 100%;
    height: 160px;
    object-fit: cover;
    border-radius: 0.75rem;
    margin-bottom: 1rem;
    flex-shrink: 0;
}

.recommendation-content {
    padding: 0.5rem 0;
    display: flex;
    flex-direction: column;
    flex: 1;
}

.recommendation-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--gray-800);
    margin-bottom: 0.25rem;
    line-height: 1.4;
    height: 2.8em;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

.recommendation-vendor {
    font-size: 0.875rem;
    color: var(--gray-600);
    margin-bottom: 0.75rem;
    height: 1.2em;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}

.recommendation-price {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1rem;
    flex-shrink: 0;
}

.current-price {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--success);
}

.original-price {
    font-size: 0.875rem;
    color: var(--gray-500);
    text-decoration: line-through;
}

.recommendation-actions {
    display: flex;
    gap: 0.5rem;
    margin-top: auto;
    flex-shrink: 0;
}

.add-to-cart-btn {
    flex: 1;
    background: linear-gradient(135deg, var(--success) 0%, var(--success-light) 100%);
    color: white;
    border: none;
    border-radius: 0.75rem;
    padding: 0.75rem;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}

.add-to-cart-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.quick-view-btn {
    background: var(--gray-100);
    color: var(--gray-600);
    border: none;
    border-radius: 0.75rem;
    padding: 0.75rem;
    cursor: pointer;
    transition: var(--transition-fast);
}

.quick-view-btn:hover {
    background: var(--gray-200);
    color: var(--gray-800);
}

/* –ü—Ä–æ–≥—Ä–µ—Å—Å –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ */
.delivery-progress {
    background: white;
    border-radius: 1rem;
    padding: 1.5rem;
    margin-top: 2rem;
    box-shadow: var(--shadow-md);
    border: 1px solid var(--gray-100);
}

.progress-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.progress-text {
    font-weight: 500;
    color: var(--gray-700);
}

.progress-percentage {
    font-weight: 700;
    color: var(--success);
    font-size: 1.125rem;
}

.progress-bar {
    width: 100%;
    height: 8px;
    background: var(--gray-200);
    border-radius: 4px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(135deg, var(--success) 0%, var(--success-light) 100%);
    border-radius: 4px;
    transition: width 0.3s ease;
}

/* ===== –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ ===== */
@media (max-width: 768px) {
    .hero-title {
        font-size: 2.25rem;
    }
    
    .hero-subtitle {
        font-size: 1.125rem;
    }
    
    .cart-item-content {
        flex-direction: column;
        text-align: center;
        gap: 1rem;
    }
    
    .quick-actions {
        justify-content: center;
    }
    
    .smart-summary {
        position: static;
        margin-top: 2rem;
    }
    
    .cart-stats-interactive {
        flex-direction: column;
        gap: 1rem;
        align-items: center;
    }
    
    .stat-card {
        min-width: 200px;
        padding: 1.25rem;
    }
    
    .savings-progress-container {
        margin: 0 1rem;
        padding: 1.25rem;
    }
    
    .progress-info {
        flex-direction: column;
        gap: 0.5rem;
        text-align: center;
    }
    
    .badge-emotion {
        font-size: 2.5rem;
    }
    
    .recommendation-item {
        flex: 0 0 240px;
        height: 380px;
    }
    
    .recommendations-header h3 {
        font-size: 1.5rem;
    }
    
    .recommendations-carousel {
        justify-content: flex-start;
        padding-left: 1rem;
        padding-right: 1rem;
    }
    
    .carousel-nav-btn {
        display: none;
    }
}
</style>
{% endblock %}

{% block content %}
<!-- Smart Cart Hero 2.0 -->
<div class="cart-hero">
    <div class="container">
        <!-- –ì–ª–∞–≤–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º -->
        <div class="hero-main">
            <h1 class="hero-title">
                <i class="fas fa-shopping-bag me-3"></i>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞
            </h1>
            <p class="hero-subtitle" id="heroSubtitle">–ì–æ—Ç–æ–≤—ã –∫ –≤—ã–≥–æ–¥–Ω–æ–π –ø–æ–∫—É–ø–∫–µ? üí∞</p>
        </div>
        
        <!-- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="cart-stats-interactive">
            <div class="stat-card primary-stat">
                <div class="stat-icon">
                    <i class="fas fa-box"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-value" id="itemCount">0</div>
                    <div class="stat-label">—Ç–æ–≤–∞—Ä–æ–≤</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-value">15-30</div>
                    <div class="stat-label">–º–∏–Ω—É—Ç</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-piggy-bank"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-value" id="totalSavings">0</div>
                    <div class="stat-label">—Å—É–º —ç–∫–æ–Ω–æ–º–∏–∏</div>
                </div>
            </div>
        </div>
        
        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —ç–∫–æ–Ω–æ–º–∏–∏ -->
        <div class="savings-progress-container" id="savingsProgress" style="display: none;">
            <div class="progress-info">
                <span class="progress-text">–î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è —ç–∫–æ–Ω–æ–º–∏–∏</span>
                <span class="progress-percentage" id="progressPercent">0%</span>
            </div>
            <div class="progress-bar-hero">
                <div class="progress-fill-hero" id="progressFillHero"></div>
            </div>
            <div class="progress-target">
                <span>–¶–µ–ª—å: <strong id="nextTarget">25,000</strong> —Å—É–º</span>
            </div>
        </div>
        
        <!-- –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –±–µ–π–¥–∂–∏ -->
        <div class="hero-badges" id="heroBadges">
            <span class="badge-emotion" id="emotionBadge">üéØ</span>
        </div>
    </div>
</div>

<div class="container">
    <!-- –£–º–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="smart-navigation">
        <div class="breadcrumb-friendly">
            <a href="{% url 'home' %}">
                <i class="fas fa-home"></i>
                –ì–ª–∞–≤–Ω–∞—è
            </a>
            <span class="separator">‚Üí</span>
            <span>–ö–æ—Ä–∑–∏–Ω–∞</span>
        </div>
    </div>
    
    <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
    <div class="quick-actions">
        <a href="{% url 'catalog:catalog' %}" class="quick-action-btn">
            <i class="fas fa-store"></i>
            –ö–∞—Ç–∞–ª–æ–≥
        </a>
        <a href="{% url 'booking:checkout' %}" class="quick-action-btn primary" id="checkoutBtn" style="display: none;">
            <i class="fas fa-credit-card"></i>
            –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
        </a>
        <a href="{% url 'booking:order_list' %}" class="quick-action-btn">
            <i class="fas fa-list"></i>
            –ú–æ–∏ –∑–∞–∫–∞–∑—ã
        </a>
    </div>
    
    <!-- –£–º–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ -->
         <div class="smart-tips" id="smartTips" style="display: none;">
         <div class="smart-tips-content">
             <div class="smart-tips-icon">üí°</div>
             <div class="smart-tips-text" id="tipText">
                 –î–æ–±–∞–≤—å—Ç–µ –µ—â–µ —Ç–æ–≤–∞—Ä–æ–≤ –∏ –ø–æ–ª—É—á–∏—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É!
             </div>
         </div>
     </div>
    
    <div class="row">
        <div class="col-lg-8">
            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤ –∫–æ—Ä–∑–∏–Ω—ã -->
            <div id="cartItems">
                <!-- –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—É—Å—Ç–æ–π –∫–æ—Ä–∑–∏–Ω—ã -->
                <div class="empty-cart-friendly" id="emptyCart">
                    <div class="empty-cart-icon">
                        <i class="fas fa-shopping-bag"></i>
                    </div>
                                         <h3>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h3>
                     <p>–î–∞–≤–∞–π—Ç–µ –Ω–∞–π–¥–µ–º –≤—ã–≥–æ–¥–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è! üéØ</p>
                    <div class="empty-cart-actions">
                        <a href="{% url 'catalog:catalog' %}" class="quick-action-btn primary">
                            <i class="fas fa-arrow-left"></i>
                            –ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∫—É–ø–∫–∞–º
                        </a>
                    </div>
                </div>
                
                <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
                <div id="loadingSkeleton" style="display: none;">
                    <div class="skeleton-friendly skeleton-item-friendly"></div>
                    <div class="skeleton-friendly skeleton-item-friendly"></div>
                    <div class="skeleton-friendly skeleton-item-friendly"></div>
                </div>
                
                <!-- –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ -->
                <div id="cartItemsList" style="display: none;">
                    <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </div>
        </div>
        
        <div class="col-lg-4">
            <!-- –£–º–Ω–∞—è —Å–≤–æ–¥–∫–∞ –∑–∞–∫–∞–∑–∞ -->
            <div class="smart-summary">
                <div class="summary-mood">
                    <span class="mood-icon" id="moodIcon">üéâ</span>
                    <span class="mood-text" id="moodText">–û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä!</span>
                </div>
                
                                 <div class="summary-row">
                     <span class="summary-label">–¢–æ–≤–∞—Ä—ã:</span>
                     <span class="summary-value" id="subtotal">0 —Å—É–º</span>
                 </div>
                 
                 <div class="summary-row">
                     <span class="summary-label">–î–æ—Å—Ç–∞–≤–∫–∞:</span>
                     <span class="summary-value" id="deliveryFee">0 —Å—É–º</span>
                 </div>
                
                                 <div class="summary-row">
                     <span class="summary-label">–í–∞—à–∞ —ç–∫–æ–Ω–æ–º–∏—è:</span>
                     <span class="summary-value">
                         <span id="savings">0 —Å—É–º</span>
                         <span class="summary-savings" id="savingsPercent">0%</span>
                     </span>
                 </div>
                
                                 <div class="summary-row">
                     <span class="summary-label">–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ:</span>
                     <span class="summary-value summary-total" id="total">0 —Å—É–º</span>
                 </div>
                
                <button class="checkout-btn-friendly" id="checkoutBtnSummary" style="display: none;">
                    <i class="fas fa-credit-card"></i>
                    –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
                </button>
                
                <a href="{% url 'catalog:catalog' %}" class="continue-shopping-btn-friendly">
                    <i class="fas fa-plus"></i>
                    –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä—ã
                </a>
            </div>
        </div>
    </div>
</div>

<!-- ===== –ö–ê–¢–ê–õ–û–ì –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–• –¢–û–í–ê–†–û–í ===== -->
<section class="recommendations-section">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–∫—Ü–∏–∏ -->
    <div class="recommendations-header">
        <h3>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –∫ –≤–∞—à–µ–º—É –∑–∞–∫–∞–∑—É</h3>
        <p>–î–æ–±–∞–≤—å—Ç–µ –∏ –ø–æ–ª—É—á–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —Å–∫–∏–¥–∫—É</p>
    </div>
    
    <!-- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–ª–∞–π–¥–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤ -->
    <div class="recommendations-carousel-container">
        <button class="carousel-nav-btn carousel-prev" id="carouselPrev">
            <i class="fas fa-chevron-left"></i>
        </button>
        
        <div class="recommendations-carousel" id="recommendationsCarousel">
            <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
        </div>
        
        <button class="carousel-nav-btn carousel-next" id="carouselNext">
            <i class="fas fa-chevron-right"></i>
        </button>
    </div>
    
    <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ -->
    <div class="delivery-progress" id="deliveryProgress" style="display: none;">
        <div class="progress-info">
            <span class="progress-text">–î–æ–±–∞–≤—å—Ç–µ –µ—â–µ –Ω–∞ <span id="remainingAmount">0</span> —Å—É–º –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏</span>
            <span class="progress-percentage" id="progressPercentage">0%</span>
        </div>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
    </div>
</section>

<!-- –®–∞–±–ª–æ–Ω —Ç–æ–≤–∞—Ä–∞ –∫–æ—Ä–∑–∏–Ω—ã -->
<template id="cartItemTemplate">
    <div class="cart-item-friendly">
        <div class="cart-item-content">
            <img src="" alt="" class="cart-item-image item-image">
            
            <div class="cart-item-details">
                <div class="cart-item-title item-title"></div>
                <div class="cart-item-vendor item-vendor">
                    <i class="fas fa-store"></i>
                    <span></span>
                </div>
                <div class="cart-item-price item-price">
                    <span class="price-amount"></span>
                    <span class="price-savings" style="display: none;"></span>
                </div>
            </div>
            
            <div class="quantity-controls-friendly">
                <button class="quantity-btn-friendly quantity-minus" type="button">
                    <i class="fas fa-minus"></i>
                </button>
                <input type="number" class="quantity-input-friendly" value="1" min="1">
                <button class="quantity-btn-friendly quantity-plus" type="button">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            
            <button class="remove-btn-friendly remove-item">
                <i class="fas fa-trash"></i>
            </button>
        </div>
    </div>
</template>

<!-- –®–∞–±–ª–æ–Ω —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ -->
<template id="recommendationItemTemplate">
    <div class="recommendation-item">
        <div class="recommendation-badges">
            <span class="badge-hot">üî• –ì–æ—Ä—è—á–µ–µ</span>
            <span class="badge-discount">üí∞ -30%</span>
        </div>
        
        <img src="" alt="" class="recommendation-image">
        
        <div class="recommendation-content">
            <h4 class="recommendation-title"></h4>
            <p class="recommendation-vendor"></p>
            
            <div class="recommendation-price">
                <span class="current-price"></span>
                <span class="original-price"></span>
            </div>
            
            <div class="recommendation-actions">
                <button class="add-to-cart-btn">
                    <i class="fas fa-plus"></i>
                    –î–æ–±–∞–≤–∏—Ç—å
                </button>
                <button class="quick-view-btn">
                    <i class="fas fa-eye"></i>
                </button>
            </div>
        </div>
    </div>
</template>

<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
<div id="notificationContainer"></div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/main.js' %}"></script>
<script>
// ===== FRIENDLY SMART CART MANAGEMENT =====
class FriendlySmartCart {
    constructor() {
        this.cart = [];
        this.recommendations = [];
        this.init();
    }
    
    init() {
        this.loadCartItems();
        this.loadRecommendations();
        this.setupEventListeners();
        this.setupStorageListener();
        this.initializeHeroElements();
    }
    
    setupEventListeners() {
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
        window.addEventListener('storage', (e) => {
            if (e.key === 'foodsave_cart') {
                this.loadCartItems();
            }
        });
        
        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–∞—Ä—É—Å–µ–ª–∏
        this.setupCarouselNavigation();
    }
    
    setupStorageListener() {
        // –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
        window.addEventListener('cartUpdated', () => {
            this.loadCartItems();
        });
    }
    
    initializeHeroElements() {
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        this.updateSavingsProgress(0);
        this.updateEmotionalBadge(0);
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        const statCards = document.querySelectorAll('.stat-card');
        statCards.forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            
            setTimeout(() => {
                card.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, index * 200);
        });
    }
    
    loadCartItems() {
        this.showLoading();
        
        // –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ UX
        setTimeout(() => {
            this.cart = JSON.parse(localStorage.getItem('foodsave_cart')) || [];
            this.renderCart();
            this.hideLoading();
        }, 300);
    }
    
    showLoading() {
        document.getElementById('loadingSkeleton').style.display = 'block';
        document.getElementById('cartItemsList').style.display = 'none';
        document.getElementById('emptyCart').style.display = 'none';
    }
    
    hideLoading() {
        document.getElementById('loadingSkeleton').style.display = 'none';
    }
    
    renderCart() {
        const cartItemsList = document.getElementById('cartItemsList');
        const emptyCart = document.getElementById('emptyCart');
        const checkoutBtn = document.getElementById('checkoutBtn');
        const checkoutBtnSummary = document.getElementById('checkoutBtnSummary');
        const smartTips = document.getElementById('smartTips');
        
        if (this.cart.length === 0) {
            cartItemsList.style.display = 'none';
            emptyCart.style.display = 'block';
            checkoutBtn.style.display = 'none';
            checkoutBtnSummary.style.display = 'none';
            smartTips.style.display = 'none';
            this.updateOrderSummary(0, 0);
            this.updateMood('empty');
            return;
        }
        
        cartItemsList.style.display = 'block';
        emptyCart.style.display = 'none';
        checkoutBtn.style.display = 'inline-flex';
        checkoutBtnSummary.style.display = 'block';
        
        cartItemsList.innerHTML = '';
        let subtotal = 0;
        
        this.cart.forEach((item, index) => {
            const cartItem = this.createCartItemElement(item, index);
            cartItemsList.appendChild(cartItem);
            
                         // –ú–æ–∫-—Ä–∞—Å—á–µ—Ç —Ü–µ–Ω—ã (–∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
             const price = 15990;
             subtotal += price * item.quantity;
        });
        
        this.updateOrderSummary(subtotal, this.cart.length);
        this.updateItemCount();
        this.updateMood(this.cart.length);
        this.updateSavingsProgress(subtotal);
        this.updateEmotionalBadge(subtotal);
        this.updateSmartTips(subtotal);
        this.updateDeliveryProgress(subtotal);
    }
    
    createCartItemElement(item, index) {
        const template = document.getElementById('cartItemTemplate');
        const cartItem = template.content.cloneNode(true);
        
                 // –ú–æ–∫-–¥–∞–Ω–Ω—ã–µ - –≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —ç—Ç–æ –±—É–¥–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∏–∑ API
         const mockData = {
             title: '–ü–∏—Ü—Ü–∞ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞',
             vendor: '–ü–∏—Ü—Ü–µ—Ä–∏—è "–í–∫—É—Å–Ω–æ"',
             price: 15990,
             originalPrice: 19990,
             image: 'https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=200'
         };
        
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞
        cartItem.querySelector('.item-image').src = mockData.image;
        cartItem.querySelector('.item-image').alt = mockData.title;
        cartItem.querySelector('.item-title').textContent = mockData.title;
        cartItem.querySelector('.item-vendor span').textContent = mockData.vendor;
                 cartItem.querySelector('.price-amount').textContent = `${mockData.price.toLocaleString()} —Å—É–º`;
        
        // –ü–æ–∫–∞–∑ —ç–∫–æ–Ω–æ–º–∏–∏ –µ—Å–ª–∏ –µ—Å—Ç—å
        if (mockData.originalPrice > mockData.price) {
            const savings = mockData.originalPrice - mockData.price;
            const savingsPercent = Math.round((savings / mockData.originalPrice) * 100);
            cartItem.querySelector('.price-savings').textContent = `–≠–∫–æ–Ω–æ–º–∏—è ${savingsPercent}%`;
            cartItem.querySelector('.price-savings').style.display = 'inline';
        }
        
        cartItem.querySelector('.quantity-input-friendly').value = item.quantity;
        
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º UX
        this.addItemEventListeners(cartItem, index);
        
        return cartItem;
    }
    
    addItemEventListeners(cartItem, index) {
        const quantityInput = cartItem.querySelector('.quantity-input-friendly');
        const minusBtn = cartItem.querySelector('.quantity-minus');
        const plusBtn = cartItem.querySelector('.quantity-plus');
        const removeBtn = cartItem.querySelector('.remove-item');
        
        // –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å —Ç–∞–∫—Ç–∏–ª—å–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é
        minusBtn.addEventListener('click', () => {
            this.updateQuantity(index, -1);
            this.addHapticFeedback();
        });
        
        plusBtn.addEventListener('click', () => {
            this.updateQuantity(index, 1);
            this.addHapticFeedback();
        });
        
        removeBtn.addEventListener('click', () => {
            this.removeCartItem(index);
            this.addHapticFeedback();
        });
        
        quantityInput.addEventListener('change', (e) => {
            const newQuantity = parseInt(e.target.value) || 1;
            this.updateCartItemQuantity(index, newQuantity);
        });
        
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞–≤–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π
        cartItem.querySelector('.cart-item-friendly').style.animationDelay = `${index * 0.1}s`;
    }
    
    updateQuantity(index, change) {
        if (this.cart[index]) {
            this.cart[index].quantity = Math.max(1, this.cart[index].quantity + change);
            this.saveCart();
            this.loadCartItems();
            this.updateCartCounter();
            this.showNotification('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ! üí∞', 'success');
        }
    }
    
    updateCartItemQuantity(index, quantity) {
        if (this.cart[index]) {
            this.cart[index].quantity = Math.max(1, quantity);
            this.saveCart();
            this.loadCartItems();
            this.updateCartCounter();
            this.showNotification('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ! üí∞', 'success');
        }
    }
    
    removeCartItem(index) {
        this.cart.splice(index, 1);
        this.saveCart();
        this.loadCartItems();
        this.updateCartCounter();
        this.showNotification('–¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã üí∞', 'info');
    }
    
    saveCart() {
        localStorage.setItem('foodsave_cart', JSON.stringify(this.cart));
        // –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
        window.dispatchEvent(new CustomEvent('cartUpdated'));
    }
    
         updateOrderSummary(subtotal, itemCount) {
         const deliveryFee = itemCount > 0 ? (subtotal > 20000 ? 0 : 5000) : 0;
         const savings = Math.round(subtotal * 0.15); // 15% —ç–∫–æ–Ω–æ–º–∏—è
         const total = subtotal + deliveryFee - savings;
         
         document.getElementById('subtotal').textContent = `${subtotal.toLocaleString()} —Å—É–º`;
         document.getElementById('deliveryFee').textContent = `${deliveryFee.toLocaleString()} —Å—É–º`;
         document.getElementById('savings').textContent = `${savings.toLocaleString()} —Å—É–º`;
         document.getElementById('savingsPercent').textContent = '15%';
         document.getElementById('total').textContent = `${total.toLocaleString()} —Å—É–º`;
     }
    
    updateItemCount() {
        const itemCount = this.cart.reduce((total, item) => total + item.quantity, 0);
        document.getElementById('itemCount').textContent = itemCount;
    }
    
    updateMood(itemCount) {
        const moodElement = document.getElementById('heroSubtitle');
        if (!moodElement) return;
        
        let mood = '–ì–æ—Ç–æ–≤—ã –∫ –≤—ã–≥–æ–¥–Ω–æ–π –ø–æ–∫—É–ø–∫–µ? üí∞';
        
        if (itemCount === 0) {
            mood = '–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ üòî';
        } else if (itemCount <= 3) {
            mood = '–û—Ç–ª–∏—á–Ω–æ–µ –Ω–∞—á–∞–ª–æ! üöÄ';
        } else if (itemCount <= 6) {
            mood = '–•–æ—Ä–æ—à–∏–π –≤—ã–±–æ—Ä! üëç';
        } else if (itemCount <= 10) {
            mood = '–û—Ç–ª–∏—á–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞! üéâ';
        } else {
            mood = '–í—ã - VIP –∫–ª–∏–µ–Ω—Ç! üèÜ';
        }
        
        moodElement.textContent = mood;
    }
    
    updateSavingsProgress(total) {
        const progressContainer = document.getElementById('savingsProgress');
        const progressFill = document.getElementById('progressFillHero');
        const progressPercent = document.getElementById('progressPercent');
        const nextTarget = document.getElementById('nextTarget');
        const totalSavings = document.getElementById('totalSavings');
        
        if (!progressContainer || !progressFill || !progressPercent || !nextTarget || !totalSavings) return;
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å —Ç–æ–≤–∞—Ä—ã
        if (total > 0) {
            progressContainer.style.display = 'block';
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —ç–∫–æ–Ω–æ–º–∏—é (–ø—Ä–∏–º–µ—Ä: 15% –æ—Ç –æ–±—â–µ–π —Å—É–º–º—ã)
            const savings = Math.round(total * 0.15);
            totalSavings.textContent = savings.toLocaleString();
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–ª–µ–¥—É—é—â–∏–π –ø–æ—Ä–æ–≥ –¥–ª—è —Å–∫–∏–¥–∫–∏
            let nextThreshold = 25000;
            let currentProgress = 0;
            
            if (total >= 50000) {
                nextThreshold = 100000;
                currentProgress = Math.min((total - 50000) / 50000 * 100, 100);
            } else if (total >= 25000) {
                nextThreshold = 50000;
                currentProgress = Math.min((total - 25000) / 25000 * 100, 100);
            } else {
                currentProgress = Math.min(total / 25000 * 100, 100);
            }
            
            nextTarget.textContent = nextThreshold.toLocaleString();
            progressPercent.textContent = Math.round(currentProgress) + '%';
            progressFill.style.width = currentProgress + '%';
        } else {
            progressContainer.style.display = 'none';
        }
    }
    
    updateEmotionalBadge(total) {
        const emotionBadge = document.getElementById('emotionBadge');
        if (!emotionBadge) return;
        
        let emoji = 'üéØ';
        
        if (total === 0) {
            emoji = 'üõí';
        } else if (total < 15000) {
            emoji = 'üí∞';
        } else if (total < 30000) {
            emoji = 'üî•';
        } else if (total < 50000) {
            emoji = '‚ö°';
        } else if (total < 100000) {
            emoji = 'üèÜ';
        } else {
            emoji = 'üëë';
        }
        
        emotionBadge.textContent = emoji;
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø—Ä–∏ —Å–º–µ–Ω–µ —ç–º–æ–¥–∑–∏
        emotionBadge.style.animation = 'none';
        emotionBadge.offsetHeight; // Trigger reflow
        emotionBadge.style.animation = 'emotionFloat 3s ease-in-out infinite';
    }
    
    updateSmartTips(subtotal) {
        const smartTips = document.getElementById('smartTips');
        const tipText = document.getElementById('tipText');
        
                 if (subtotal < 10000) {
             smartTips.style.display = 'block';
             tipText.textContent = '–î–æ–±–∞–≤—å—Ç–µ –µ—â–µ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ 10,000 —Å—É–º –∏ –ø–æ–ª—É—á–∏—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É! üöö';
         } else if (subtotal < 20000) {
             smartTips.style.display = 'block';
             tipText.textContent = '–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ 20,000 —Å—É–º –∏ –ø–æ–ª—É—á–∏—Ç–µ —Å–∫–∏–¥–∫—É 20%! üí∞';
         } else {
             smartTips.style.display = 'none';
         }
    }
    
    updateCartCounter() {
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
        const cartCounter = document.querySelector('.cart-counter');
        if (cartCounter) {
            const totalItems = this.cart.reduce((total, item) => total + item.quantity, 0);
            cartCounter.textContent = totalItems;
        }
    }
    
    showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `notification-friendly ${type}`;
        
        const icon = this.getNotificationIcon(type);
        notification.innerHTML = `
            <div class="notification-icon">${icon}</div>
            <div class="notification-text">${message}</div>
        `;
        
        document.getElementById('notificationContainer').appendChild(notification);
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(() => {
            notification.style.animation = 'slideInRight 0.3s ease-out reverse';
            setTimeout(() => notification.remove(), 300);
        }, 3000);
    }
    
         getNotificationIcon(type) {
         const icons = {
             success: '‚úÖ',
             error: '‚ö†Ô∏è',
             info: 'üí°'
         };
         return icons[type] || 'üí°';
     }
    
    addHapticFeedback() {
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–∫—Ç–∏–ª—å–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
        if (navigator.vibrate) {
            navigator.vibrate(50);
        }
    }
    
    // ===== –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ï –¢–û–í–ê–†–´ =====
    loadRecommendations() {
        // –ú–æ–∫-–¥–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —ç—Ç–æ –±—É–¥–µ—Ç API)
        this.recommendations = [
            {
                id: 1,
                title: '–ö–æ–∫–∞-–ö–æ–ª–∞',
                vendor: '–ü–∏—Ü—Ü–µ—Ä–∏—è "–í–∫—É—Å–Ω–æ"',
                price: 3000,
                originalPrice: 4500,
                image: 'https://images.unsplash.com/photo-1629203851122-3726ecdf080e?w=200',
                discount: 33,
                badge: 'hot'
            },
            {
                id: 2,
                title: '–¢–∏—Ä–∞–º–∏—Å—É',
                vendor: '–ö–∞—Ñ–µ "–°–ª–∞–¥–∫–æ–µ–∂–∫–∞"',
                price: 8000,
                originalPrice: 12000,
                image: 'https://images.unsplash.com/photo-1571877227200-a0d98ea607e9?w=200',
                discount: 33,
                badge: 'discount'
            },
            {
                id: 3,
                title: '–ß–∏–∑–∫–µ–π–∫',
                vendor: '–ö–æ–Ω–¥–∏—Ç–µ—Ä—Å–∫–∞—è "–†–∞–¥–æ—Å—Ç—å"',
                price: 6500,
                originalPrice: 9000,
                image: 'https://images.unsplash.com/photo-1533134242443-d4fd215305ad?w=200',
                discount: 28,
                badge: 'new'
            },
            {
                id: 4,
                title: '–ú–æ—Ö–∏—Ç–æ',
                vendor: '–ë–∞—Ä "–¢—Ä–æ–ø–∏–∫–∏"',
                price: 5500,
                originalPrice: 7500,
                image: 'https://images.unsplash.com/photo-1579952363873-27f3bade9f55?w=200',
                discount: 27,
                badge: 'hot'
            },
            {
                id: 5,
                title: '–°–∞–ª–∞—Ç –¶–µ–∑–∞—Ä—å',
                vendor: '–†–µ—Å—Ç–æ—Ä–∞–Ω "–ò—Ç–∞–ª–∏—è"',
                price: 12000,
                originalPrice: 15000,
                image: 'https://images.unsplash.com/photo-1546793665-c74683f339c1?w=200',
                discount: 20,
                badge: 'popular'
            }
        ];
        
        this.renderRecommendations();
    }
    
    renderRecommendations() {
        const carousel = document.getElementById('recommendationsCarousel');
        if (!carousel) return;
        
        carousel.innerHTML = '';
        
        this.recommendations.forEach(item => {
            const recommendationItem = this.createRecommendationElement(item);
            carousel.appendChild(recommendationItem);
        });
    }
    
    createRecommendationElement(item) {
        const template = document.getElementById('recommendationItemTemplate');
        const recommendationItem = template.content.cloneNode(true);
        
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        recommendationItem.querySelector('.recommendation-image').src = item.image;
        recommendationItem.querySelector('.recommendation-image').alt = item.title;
        recommendationItem.querySelector('.recommendation-title').textContent = item.title;
        recommendationItem.querySelector('.recommendation-vendor').textContent = item.vendor;
        recommendationItem.querySelector('.current-price').textContent = `${item.price.toLocaleString()} —Å—É–º`;
        recommendationItem.querySelector('.original-price').textContent = `${item.originalPrice.toLocaleString()} —Å—É–º`;
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–π–¥–∂–µ–π
        const badges = recommendationItem.querySelector('.recommendation-badges');
        badges.innerHTML = '';
        
        if (item.badge === 'hot') {
            badges.innerHTML = '<span class="badge-hot">üî• –ì–æ—Ä—è—á–µ–µ</span>';
        } else if (item.badge === 'discount') {
            badges.innerHTML = `<span class="badge-discount">üí∞ -${item.discount}%</span>`;
        } else if (item.badge === 'new') {
            badges.innerHTML = '<span class="badge-hot">üÜï –ù–æ–≤–∏–Ω–∫–∞</span>';
        } else if (item.badge === 'popular') {
            badges.innerHTML = '<span class="badge-discount">‚≠ê –ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</span>';
        }
        
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        const addToCartBtn = recommendationItem.querySelector('.add-to-cart-btn');
        const quickViewBtn = recommendationItem.querySelector('.quick-view-btn');
        
        addToCartBtn.addEventListener('click', () => {
            this.addRecommendationToCart(item);
        });
        
        quickViewBtn.addEventListener('click', () => {
            this.quickViewItem(item);
        });
        
        return recommendationItem;
    }
    
    addRecommendationToCart(item) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ —Ç–∞–∫–æ–π —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω–µ
        const existingItem = this.cart.find(cartItem => cartItem.id === item.id);
        
        if (existingItem) {
            existingItem.quantity += 1;
        } else {
            this.cart.push({
                id: item.id,
                quantity: 1
            });
        }
        
        this.saveCart();
        this.loadCartItems();
        this.showNotification(`"${item.title}" –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É! üí∞`, 'success');
        this.addHapticFeedback();
    }
    
    quickViewItem(item) {
        // –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞ (–º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ)
        this.showNotification(`–ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä: ${item.title}`, 'info');
    }
    
    updateDeliveryProgress(subtotal) {
        const deliveryProgress = document.getElementById('deliveryProgress');
        const remainingAmount = document.getElementById('remainingAmount');
        const progressPercentage = document.getElementById('progressPercentage');
        const progressFill = document.getElementById('progressFill');
        
        const freeDeliveryThreshold = 20000; // 20,000 —Å—É–º –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏
        const remaining = Math.max(0, freeDeliveryThreshold - subtotal);
        const percentage = Math.min(100, (subtotal / freeDeliveryThreshold) * 100);
        
        if (subtotal > 0 && subtotal < freeDeliveryThreshold) {
            deliveryProgress.style.display = 'block';
            remainingAmount.textContent = remaining.toLocaleString();
            progressPercentage.textContent = `${Math.round(percentage)}%`;
            progressFill.style.width = `${percentage}%`;
        } else {
            deliveryProgress.style.display = 'none';
        }
    }
    
    // ===== –ù–ê–í–ò–ì–ê–¶–ò–Ø –ü–û –ö–ê–†–£–°–ï–õ–ò =====
    setupCarouselNavigation() {
        const carousel = document.getElementById('recommendationsCarousel');
        const prevBtn = document.getElementById('carouselPrev');
        const nextBtn = document.getElementById('carouselNext');
        
        if (!carousel || !prevBtn || !nextBtn) return;
        
        // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–ª–µ–≤–æ
        prevBtn.addEventListener('click', () => {
            this.smoothScrollTo(carousel, -300);
        });
        
        // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–ø—Ä–∞–≤–æ
        nextBtn.addEventListener('click', () => {
            this.smoothScrollTo(carousel, 300);
        });
        
        // Touch/swipe –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —Å –ø—Ä–µ–º–∏–∞–ª—å–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π
        let startX = 0;
        let scrollLeft = 0;
        let isScrolling = false;
        
        carousel.addEventListener('touchstart', (e) => {
            startX = e.touches[0].pageX - carousel.offsetLeft;
            scrollLeft = carousel.scrollLeft;
            isScrolling = false;
        });
        
        carousel.addEventListener('touchmove', (e) => {
            if (!startX) return;
            
            const x = e.touches[0].pageX - carousel.offsetLeft;
            const walk = (x - startX) * 1.5; // –ë–æ–ª–µ–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π —Å–≤–∞–π–ø
            
            if (Math.abs(walk) > 10) {
                isScrolling = true;
                carousel.scrollLeft = scrollLeft - walk;
            }
        });
        
        carousel.addEventListener('touchend', (e) => {
            if (!isScrolling) return;
            
            const endX = e.changedTouches[0].pageX - carousel.offsetLeft;
            const walk = (endX - startX) * 1.5;
            
            // –ï—Å–ª–∏ —Å–≤–∞–π–ø –±—ã–ª –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–∏–ª—å–Ω—ã–º, –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ —Å–ª–µ–¥—É—é—â–µ–π –∫–∞—Ä—Ç–æ—á–∫–µ
            if (Math.abs(walk) > 100) {
                const direction = walk > 0 ? -1 : 1;
                const scrollDistance = 280 + 16; // —à–∏—Ä–∏–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ + gap
                this.smoothScrollTo(carousel, direction * scrollDistance);
            }
            
            startX = 0;
            isScrolling = false;
        });
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
        carousel.addEventListener('scroll', () => {
            this.updateCarouselButtons();
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–æ–∫
        this.updateCarouselButtons();
    }
    
    updateCarouselButtons() {
        const carousel = document.getElementById('recommendationsCarousel');
        const prevBtn = document.getElementById('carouselPrev');
        const nextBtn = document.getElementById('carouselNext');
        
        if (!carousel || !prevBtn || !nextBtn) return;
        
        const isAtStart = carousel.scrollLeft <= 0;
        const isAtEnd = carousel.scrollLeft >= carousel.scrollWidth - carousel.clientWidth;
        
        prevBtn.style.opacity = isAtStart ? '0.5' : '1';
        prevBtn.style.pointerEvents = isAtStart ? 'none' : 'auto';
        
        nextBtn.style.opacity = isAtEnd ? '0.5' : '1';
        nextBtn.style.pointerEvents = isAtEnd ? 'none' : 'auto';
    }
    
    // ===== –ü–†–ï–ú–ò–ê–õ–¨–ù–ê–Ø –ü–õ–ê–í–ù–ê–Ø –ê–ù–ò–ú–ê–¶–ò–Ø =====
    smoothScrollTo(carousel, distance) {
        const startPosition = carousel.scrollLeft;
        const targetPosition = startPosition + distance;
        const startTime = performance.now();
        const duration = 800; // 800ms –¥–ª—è –ø—Ä–µ–º–∏–∞–ª—å–Ω–æ–≥–æ –æ—â—É—â–µ–Ω–∏—è
        
        const easeOutCubic = (t) => 1 - Math.pow(1 - t, 3); // –ü–ª–∞–≤–Ω–∞—è –∫—Ä–∏–≤–∞—è –∑–∞–º–µ–¥–ª–µ–Ω–∏—è
        
        const animate = (currentTime) => {
            const elapsed = currentTime - startTime;
            const progress = Math.min(elapsed / duration, 1);
            const easedProgress = easeOutCubic(progress);
            
            carousel.scrollLeft = startPosition + (distance * easedProgress);
            
            if (progress < 1) {
                requestAnimationFrame(animate);
            }
        };
        
        requestAnimationFrame(animate);
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥—Ä—É–∂–µ–ª—é–±–Ω–æ–π —É–º–Ω–æ–π –∫–æ—Ä–∑–∏–Ω—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ DOM
document.addEventListener('DOMContentLoaded', function() {
    new FriendlySmartCart();
});
</script>
{% endblock %}
