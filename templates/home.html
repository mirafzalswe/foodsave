{% extends 'base.html' %}
{% load static %}

{% block title %}FoodSave - Главная{% endblock %}

{% block content %}
<div class="container py-5">
    <!-- Premium Hero -->
    <div class="row justify-content-center mb-4">
        <div class="col-lg-10 text-center">
            <h1 class="display-6 fw-bold mb-2 hero-title">Экономьте на еде, спасая планету</h1>
            <p class="lead text-muted mb-3">Премиальный маркетплейс с выгодными наборами от проверенных заведений рядом с вами.</p>
            <div class="d-flex flex-wrap justify-content-center gap-2 hero-chips">
                <span class="chip"><i class="fas fa-percent me-2"></i>Экономия до 70%</span>
                <span class="chip"><i class="fas fa-shield-check me-2"></i>Проверенные заведения</span>
                <span class="chip"><i class="fas fa-leaf me-2"></i>Спасаем еду от выброса</span>
            </div>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-8 text-center">
            <!-- Main Buttons -->
            <div class="row g-4 mb-5">
                <div class="col-md-6">
                    <a href="{% url 'catalog:catalog' %}?type=dishes" class="btn btn-primary btn-lg w-100 py-4 main-category-btn">
                        <div class="d-flex flex-column align-items-center">
                            <i class="fas fa-utensils fa-3x mb-3"></i>
                            <h4 class="mb-0">Блюда</h4>
                            <small class="text-light">Готовые блюда и еда</small>
                        </div>
                    </a>
                </div>
                <div class="col-md-6">
                    <a href="{% url 'catalog:catalog' %}?type=products" class="btn btn-success btn-lg w-100 py-4 main-category-btn">
                        <div class="d-flex flex-column align-items-center">
                            <i class="fas fa-shopping-basket fa-3x mb-3"></i>
                            <h4 class="mb-0">Продукты</h4>
                            <small class="text-light">Свежие продукты</small>
                        </div>
                    </a>
                </div>
            </div>
            
            <!-- Filters Section -->
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-filter me-2"></i>Фильтры
                    </h5>
                </div>
                <div class="card-body">
                    <form method="get" action="{% url 'catalog:catalog' %}" class="row g-3">
                        <!-- Location Filter -->
                        <div class="col-md-6">
                            <label class="form-label">Район</label>
                            <select name="location" class="form-select">
                                <option value="">Все районы</option>
                                <option value="center">Центр</option>
                                <option value="north">Север</option>
                                <option value="south">Юг</option>
                                <option value="east">Восток</option>
                                <option value="west">Запад</option>
                            </select>
                        </div>
                        
                        <!-- Price Range -->
                        <div class="col-md-6">
                            <label class="form-label">Цена</label>
                            <select name="price_range" class="form-select">
                                <option value="">Любая цена</option>
                                <option value="0-500">До 500 ₸</option>
                                <option value="500-1000">500-1000 ₸</option>
                                <option value="1000-2000">1000-2000 ₸</option>
                                <option value="2000+">Свыше 2000 ₸</option>
                            </select>
                        </div>
                        
                        <!-- Discount -->
                        <div class="col-md-6">
                            <label class="form-label">Скидка</label>
                            <select name="discount" class="form-select">
                                <option value="">Любая скидка</option>
                                <option value="10">От 10%</option>
                                <option value="20">От 20%</option>
                                <option value="30">От 30%</option>
                                <option value="50">От 50%</option>
                            </select>
                        </div>
                        
                        <!-- Vendor Type -->
                        <div class="col-md-6">
                            <label class="form-label">Тип заведения</label>
                            <select name="vendor_type" class="form-select">
                                <option value="">Все заведения</option>
                                <option value="restaurant">Ресторан</option>
                                <option value="cafe">Кафе</option>
                                <option value="store">Магазин</option>
                            </select>
                        </div>
                        
                        <!-- Time Filter -->
                        <div class="col-md-6">
                            <label class="form-label">Время получения</label>
                            <select name="pickup_time" class="form-select">
                                <option value="">Любое время</option>
                                <option value="morning">Утром (8:00-12:00)</option>
                                <option value="afternoon">Днем (12:00-18:00)</option>
                                <option value="evening">Вечером (18:00-22:00)</option>
                            </select>
                        </div>
                        
                        <!-- Dietary Preferences -->
                        <div class="col-md-6">
                            <label class="form-label">Особенности</label>
                            <select name="dietary" class="form-select">
                                <option value="">Без ограничений</option>
                                <option value="vegetarian">Вегетарианское</option>
                                <option value="vegan">Веганское</option>
                                <option value="halal">Халяль</option>
                                <option value="gluten_free">Без глютена</option>
                            </select>
                        </div>
                        
                        <div class="col-12">
                            <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="fas fa-search me-2"></i>Найти предложения
                                </button>
                                <button type="reset" class="btn btn-outline-secondary btn-lg">
                                    <i class="fas fa-times me-2"></i>Сбросить
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Trust / Value strip -->
            <div class="trust-strip mt-4">
                <div class="trust-item"><i class="fas fa-lock me-2"></i>Безопасная оплата</div>
                <div class="trust-item"><i class="fas fa-undo me-2"></i>Гарантия возврата</div>
                <div class="trust-item"><i class="fas fa-headset me-2"></i>Поддержка 24/7</div>
            </div>

            <!-- How it works -->
            <div class="how-works mt-3">
                <div class="step"><i class="fas fa-list-ul me-2"></i>Выберите предложения</div>
                <div class="step"><i class="fas fa-credit-card me-2"></i>Оплатите онлайн</div>
                <div class="step"><i class="fas fa-bag-shopping me-2"></i>Заберите в удобное время</div>
            </div>

            <!-- Eco Impact -->
            <div class="eco-impact mt-3">
                <i class="fas fa-seedling me-2"></i>
                Мы уже спасли <strong>{{ eco_kg|default:"12 540" }} кг</strong> еды и сократили <strong>{{ eco_co2|default:"33" }} тонны CO₂</strong>
            </div>

            <!-- Partners strip -->
            <div class="partners mt-3">
                <span class="partner">Magnum</span>
                <span class="partner">Small&Fresh</span>
                <span class="partner">Green Market</span>
                <span class="partner">Urban Cafe</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
/* Hero */
.hero-title { letter-spacing: -0.02em; }
.hero-chips .chip {
    background: #EFF6FF;
    color: #1E3A8A;
    border: 1px solid #DBEAFE;
    padding: 8px 12px;
    border-radius: 999px;
    font-weight: 600;
    font-size: 0.95rem;
}

.main-category-btn {
    background: var(--premium-surface);
    color: var(--premium-text);
    border: 1px solid #e5e7eb;
    border-radius: 15px;
    transition: all var(--premium-dur) var(--premium-ease);
    box-shadow: var(--premium-elev);
}

/* Force white card look for both variants */
.main-category-btn.btn-primary,
.main-category-btn.btn-success {
    background: var(--premium-surface) !important;
    color: var(--premium-text) !important;
    border: 1px solid #e5e7eb;
}

.main-category-btn:hover {
    transform: translateY(-5px);
    box-shadow: var(--premium-elev-hover);
}

/* Icon styling with contrast */
.main-category-btn i {
    transition: transform var(--premium-dur) var(--premium-ease);
    font-size: 2.5rem; /* keep big but balanced */
    padding: 10px;
    border-radius: 12px;
}

/* Dishes card (was btn-primary) → green icon on white */
.main-category-btn.btn-primary i {
    color: var(--premium-primary);
    background: rgba(5,150,105,0.08);
}

/* Products card (was btn-success) → blue icon on white */
.main-category-btn.btn-success i {
    color: var(--premium-accent);
    background: rgba(59,130,246,0.08);
}

.main-category-btn:hover i { transform: scale(1.08); }

.card { border: 1px solid #e5e7eb; border-radius: 15px; box-shadow: var(--premium-elev); }
.card-header { background: var(--premium-surface); color: var(--premium-text); border-radius: 15px 15px 0 0 !important; border-bottom: 1px solid #e5e7eb; }

.form-select { border-radius: 10px; border: 1px solid #e5e7eb; transition: border-color var(--premium-dur) var(--premium-ease); }
.form-select:focus { border-color: var(--premium-primary); box-shadow: 0 0 0 0.2rem rgba(5, 150, 105, 0.25); }

/* CTA buttons (keep logic) */
.btn.btn-primary { background: var(--premium-primary); border: none; }
.btn.btn-primary:hover { background: var(--premium-primary-700); }
.btn.btn-success { background: var(--premium-accent); border: none; }
.btn.btn-success:hover { filter: brightness(0.95); }

/* Trust strip */
.trust-strip { display: grid; grid-template-columns: repeat(3,1fr); gap: 12px; margin-top: 16px; }
.trust-item { background: #F3F4F6; border: 1px solid #E5E7EB; border-radius: 12px; padding: 10px 12px; font-weight: 600; color: #374151; }

/* How it works */
.how-works { display: grid; grid-template-columns: repeat(3,1fr); gap: 12px; }
.how-works .step { background: #FFFFFF; border: 1px solid #E5E7EB; border-radius: 12px; padding: 10px 12px; font-weight: 600; color: #374151; box-shadow: var(--premium-elev); }

/* Eco impact */
.eco-impact { background: #ECFDF5; color: #065F46; border: 1px solid #A7F3D0; border-radius: 12px; padding: 10px 12px; font-weight: 600; }

/* Partners */
.partners { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
.partners .partner { background: #F9FAFB; color: #6B7280; border: 1px solid #E5E7EB; border-radius: 999px; padding: 8px 12px; font-weight: 600; }

/* Small text contrast inside category cards */
.main-category-btn small { color: var(--premium-muted) !important; }
.main-category-btn h4 { color: var(--premium-text); }

/* Responsive */
@media (max-width: 768px) {
    .trust-strip { grid-template-columns: 1fr; }
    .how-works { grid-template-columns: 1fr; }
}
</style>
{% endblock %}
